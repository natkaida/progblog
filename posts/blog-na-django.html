
<!DOCTYPE html>
<html lang="en">
   <head>
      <title>Блог разработчика - </title>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="description" content="developers's blog">
      <link rel="shortcut icon" href="/progblog/static/favicon.ico">
      <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">
      <script defer src="/progblog/static/assets/js/all.js"></script>
      <link id="theme-style" rel="stylesheet" href="/progblog/static/assets/css/theme-1.css">
      <link id="blog-style" rel="stylesheet" href="/progblog/static/assets/css/blog_style.css">
      <link id="code-style" rel="stylesheet" href="/progblog/static/assets/css/dracula.css">
   </head>
   <body>
      <header class="header text-center">
         <div class="force-overflow">
            <h1 class="blog-name pt-lg-4 mb-0"><a class="no-text-decoration" href="https://natkaida.github.io/progblog">Евгений Онегин</a></h1>
            
<nav class="navbar navbar-expand-lg navbar-dark" >
   <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="javascript:void(0);navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
   <span class="navbar-toggler-icon"></span>
   </button>
   <div id="navigation" class="collapse navbar-collapse flex-column" >
      <div class="profile-section pt-3 pt-lg-0">
         <a href="https://natkaida.github.io/progblog"><img class="profile-image mb-3 rounded-circle mx-auto" src="/progblog/static/assets/img/profile.png" alt="image"></a>            
         <ul class="social-list list-inline py-2 mx-auto">
            <li class="list-inline-item"><a href="javascript:void(0);"><i class="fab fa-telegram fa-fw"></i></a></li>
            <li class="list-inline-item"><a href="javascript:void(0);"><i class="fab fa-linkedin-in fa-fw"></i></a></li>
            <li class="list-inline-item"><a href="javascript:void(0);"><i class="fab fa-github-alt fa-fw"></i></a></li>
            <li class="list-inline-item"><a href="javascript:void(0);"><i class="fab fa-stack-overflow fa-fw"></i></a></li>
            <li class="list-inline-item"><a href="javascript:void(0);"><i class="fab fa-codepen fa-fw"></i></a></li>
         </ul>
         <hr>
      </div>
      <ul class="navbar-nav flex-column text-start">
         <li class="nav-item">
            <a class="nav-link" href="/progblog/tags/backend.html"><i class="fas fa-computer fa-fw me-2"></i>Бэкенд</a>
         </li>
         <li class="nav-item">
            <a class="nav-link" href="/progblog/tags/frontend.html"><i class="fas fa-laptop-code fa-fw me-2"></i>Фронтенд</a>
         </li>
         <li class="nav-item">
            <a class="nav-link" href="/progblog/tags/projects.html"><i class="fas fa-briefcase fa-fw me-2"></i>Проекты</a>
         </li>
         <li class="nav-item">
            <a class="nav-link" href="/progblog/tags/ideas.html"><i class="fas fa-blog fa-fw me-2"></i>Идеи</a>
         </li>
         <li class="nav-item">
            <a class="nav-link" href="/progblog/tags/answers.html"><i class="fas fa-envelope-open-text fa-fw me-2"></i>Ответы на вопросы</a>
         </li>
         <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="javascript:void(0);" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fas fa-cogs fa-fw me-2"></i>Другие темы
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
               <li><a class="dropdown-item" href="/progblog/tags/kubernetes.html">Kubernetes</a></li>
               <li><a class="dropdown-item" href="/progblog/tags/docker.html">Docker</a></li>
               <li><a class="dropdown-item" href="/progblog/tags/ubuntu.html">Ubuntu</a></li>
               <li><a class="dropdown-item" href="/progblog/tags/mint.html">Linux Mint</a></li>
            </ul>
         </li>
      </ul>
      <div class="my-2">
         <a class="btn btn-primary" href="https://natkaida.github.io/progblog/contact.html"><i class="fas fa-paper-plane me-2"></i>Сообщение</a>
      </div>
      <div class="dark-mode-toggle text-center w-100">
         <hr class="mb-4">
         <h4 class="toggle-name mb-3 "><i class="fas fa-adjust me-1"></i>Темная/светлая тема</h4>
         <input class="toggle" id="darkmode" type="checkbox">
         <label class="toggle-btn mx-auto mb-0" for="darkmode"></label>                        
      </div>
   </div>
</nav>
         </div>
      </header>
      <div class="main-wrapper">
         
<article class="blog-post px-3 py-5 p-md-5">
   <div class="container single-col-max-width">
      <header class="blog-post-header">
         <h2 class="title mb-2">Блог на Django</h2>
         <div class="meta mb-3"><span class="date">17 сентября 2024 г. 16:53</span><span>Время на чтение: 6 мин</span></div>
      </header>
      <div class="blog-post-body">
         <figure class="blog-banner">
            <a href="//progblog/media/images/picture12.png"><img class="img-fluid" src="/progblog/media/images/picture12.png" alt="image"></a>
         </figure>
         <p><p>В этой статье мы рассмотрим, как создать базовый блог на Django с использованием представлений для работы с постами. Мы будем реализовать функциональность для вывода всех записей, одной записи, а также по тегам и категориям.</p>

<h2>Установка зависимостей</h2>

<p>Для начала убедитесь, что у вас установлены необходимые зависимости:</p>

<pre><code>
pip install django
pip install django-taggit
</code></pre>

<h2>Настройка проекта</h2>

<p>Создайте новый Django-проект и приложение:</p>

<pre><code>
django-admin startproject blog_project
cd blog_project
python manage.py startapp blog
</code></pre>

<h2>Модель Post</h2>

<p>Отредактируйте файл `models.py` в вашем приложении:</p>

<pre><code>
from django.db import models
from taggit.models import TagBase, TaggedItemBase

class Post(models.Model):
    title = models.CharField(max_length=200)
    content = models.TextField()
    progblog/tags = models.ManyToManyField('Tag', blank=True)
    category = models.ForeignKey('Category', on_delete=models.CASCADE, null=True, blank=True)

    def __str__(self):
        return self.title

class Category(models.Model):
    name = models.CharField(max_length=100)

    def __str__(self):
        return self.name

class Tag(TagBase):
    slug = models.SlugField(allow_unicode=True, max_length=200)

class TaggedPost(TaggedItemBase):
    content_type = models.ForeignKey('contenttypes.ContentType')
    object_id = models.PositiveIntegerField()
    tag = models.ForeignKey('Tag', on_delete=models.CASCADE)
    content_object = models.ForeignKey('Post', on_delete=models.CASCADE)

    class Meta:
        verbose_name = 'Tag'
        verbose_name_plural = 'Tags'

    def __str__(self):
        return self.tag.name
</code></pre>

<h2>Настройка URL-ов</h2>

<p>Отредактируйте файл `urls.py` в вашем приложении:</p>

<pre><code>
from django.urls import path
from .views import post_list, post_detail, tag_progblog/posts, category_progblog/posts

urlpatterns = [
    # Остальные URL-ы вашего приложения
    path('', post_list, name='post_list'),
    path('<int:year>/<int:month>/<int:day>/<slug:post>/', post_detail, name='post_detail'),
    path('tag/<slug:tag_slug>/', tag_progblog/posts, name='progblog/posts_by_tag'),
    path('category/<slug:category_slug>/', category_progblog/posts, name='progblog/posts_by_category'),
]
</code></pre>

<h2>Представления</h2>

<p>Теперь давайте напишем представления для каждой нужной нам страницы:</p>

<h3>post_list.py</h3>

<pre><code>
from django.shortcuts import render
from .models import Post

def post_list(request):
    progblog/posts = Post.objects.all()
    return render(request, 'blog/post_list.html', {'progblog/posts': progblog/posts})
</code></pre>

<h3>post_detail.py</h3>

<pre><code>
from django.shortcuts import get_object_or_404
from .models import Post

def post_detail(request, year, month, day, slug):
    post = get_object_or_404(Post, pub_date__year=year, pub_date__month=month, pub_date__day=day, slug=slug)
    return render(request, 'blog/post_detail.html', {'post': post})
</code></pre>

<h3>tag_progblog/posts.py</h3>

<pre><code>
from django.shortcuts import render
from .models import TaggedPost, Post

def tag_progblog/posts(request, slug):
    tag = Tag.objects.get(slug=slug)
    tagged_progblog/posts = TaggedPost.objects.filter(tag=tag).select_related('content_object')
    progblog/posts = [post.content_object for post in tagged_progblog/posts]
    return render(request, 'blog/tag_progblog/posts.html', {'tag': tag, 'progblog/posts': progblog/posts})
</code></pre>

<h3>category_progblog/posts.py</h3>

<pre><code>
from django.shortcuts import render
from .models import Category, Post

def category_progblog/posts(request, slug):
    category = Category.objects.get(slug=slug)
    progblog/posts = Post.objects.filter(category=category)
    return render(request, 'blog/category_progblog/posts.html', {'category': category, 'progblog/posts': progblog/posts})
</code></pre>

<h2>Шаблоны</h2>

<p>Создайте следующие шаблоны в папке `templates/blog/`:</p>

<h3>post_list.html</h3>

<pre><code>
{% extends 'base.html' %}

{% block content %}
  <h1>Все посты</h1>
  {% for post in progblog/posts %}
    <article>
      <h2><a href="{% url 'post_detail' year=post.pub_date.year month=post.pub_date.month day=post.pub_date.day slug=post.slug %}">{{ post.title }}</a></h2>
      <p>{{ post.content|truncatewords:30 }}</p>
    </article>
  {% endfor %}
{% endblock %}
</code></pre>

<h3>post_detail.html</h3>

<pre><code>
{% extends 'base.html' %}

{% block content %}
  <h1>{{ post.title }}</h1>
  <p>Дата публикации: {{ post.pub_date }}</p>
  <p>{{ post.content|safe }}</p>
  <h3>Теги:</h3>
  <ul>
    {% for tag in post.progblog/tags.all %}
      <li><a href="{% url 'progblog/posts_by_tag' tag.slug %}">{{ tag }}</a></li>
    {% endfor %}
  </ul>
{% endblock %}
</code></pre>

<h3>tag_progblog/posts.html</h3>

<pre><code>
{% extends 'base.html' %}

{% block content %}
  <h1>Посты по тегу "{{ tag }}"</h1>
  {% for post in progblog/posts %}
    <article>
      <h2><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h2>
      <p>{{ post.content|truncatewords:30 }}</p>
    </article>
  {% endfor %}
{% endblock %}
</code></pre>

<h3>category_progblog/posts.html</h3>

<pre><code>
{% extends 'base.html' %}

{% block content %}
  <h1>Посты в категории "{{ category }}"</h1>
  {% for post in progblog/posts %}
    <article>
      <h2><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h2>
      <p>{{ post.content|truncatewords:30 }}</p>
    </article>
  {% endfor %}
{% endblock %}
</code></pre>

<h2>Добавление модели Tag</h2>

<p>Не забудьте добавить модель Tag в ваш файл `models.py`:</p>

<pre><code>
from django.contrib.auth.models import User
from django.db import models
from taggit.managers import TaggableManager

class Post(models.Model):
    title = models.CharField(max_length=200)
    content = models.TextField()
    progblog/tags = TaggableManager()

    def __str__(self):
        return self.title
</code></pre>

<h2>Миграции</h2>

<p>После внесения изменений в модели выполните миграции:</p>

<pre><code>
python manage.py makemigrations
python manage.py migrate
</code></pre>

<h2>Запуск сервера</h2>

<p>Запустите Django сервер:</p>

<pre><code>
python manage.py runserver
</code></pre>

<h2>Заключение</h2>

<p>В этой статье мы создали базовый блог на Django с функционалом вывода всех записей, одной записи, а также по тегам и категориям. Мы использовали модели Taggit для работы с тегами и создали отдельные представления для каждой нужной нам страницы.</p>

<p>Это базовая структура, которую вы можете дальше расширить, добавляя такие функции, как комментарии, рейтинги, поиск и многое другое.</p>

<p>Не забудьте настроить базовые URL-ы вашего сайта и создать соответствующие шаблоны для полноценной работы блога.</p>

<p>Этот пример демонстрирует, как Django позволяет легко создавать сложные веб-приложения с помощью его ORM и готовых компонентов.</p></p>
         <div class="mt-5">
            
            <span class="bg-primary rounded-pill px-2 py-1 me-2"><a class="text-decoration-none text-white card-text" href="/progblog/tags/backend.html">backend</a></span>
            
            <span class="bg-primary rounded-pill px-2 py-1 me-2"><a class="text-decoration-none text-white card-text" href="/progblog/tags/django.html">django</a></span>
            
         </div>
      </div>
      <nav class="blog-nav nav nav-justified my-5">
         
         <a class="nav-link-prev nav-item nav-link rounded-left" href="/progblog/posts/kartochka-na-bootstrap-52.html">Предыдущая запись<i class="arrow-prev fas fa-long-arrow-alt-left"></i></a>
         
         
         <a class="nav-link-next nav-item nav-link rounded-right" href="/progblog/posts/tajmer-perehoda-po-ssylke.html">Следующая запись<i class="arrow-next fas fa-long-arrow-alt-right"></i></a>
         
      </nav>
      <a href="/" target="_self" class="btn btn-danger">На главную</a>
   </div>
</article>

         <footer class="footer text-center py-4">
            <small class="copyright">Блог разработчика &copy; 2024 Eugene Onegin</small>
         </footer>
      </div>
      
<div id="config-panel" class="config-panel config-panel-hide d-none d-lg-block">
   <div class="panel-inner">
      <a id="config-trigger" class="config-trigger text-center" href="javascript:void(0);"><i class="fas fa-cog mx-auto" data-fa-transform="down-6" ></i></a>
      <h5 class="panel-title">Выберите тему</h5>
      <ul id="color-options" class="list-inline mb-0">
         <li class="theme-1 active list-inline-item"><a data-style="/progblog/static/assets/css/theme-1.css" href="javascript:void(0);"></a></li>
         <li class="theme-2  list-inline-item"><a data-style="/progblog/static/assets/css/theme-2.css" href="javascript:void(0);"></a></li>
         <li class="theme-3  list-inline-item"><a data-style="/progblog/static/assets/css/theme-3.css" href="javascript:void(0);"></a></li>
         <li class="theme-4  list-inline-item"><a data-style="/progblog/static/assets/css/theme-4.css" href="javascript:void(0);"></a></li>
         <li class="theme-5  list-inline-item"><a data-style="/progblog/static/assets/css/theme-5.css" href="javascript:void(0);"></a></li>
         <li class="theme-6  list-inline-item"><a data-style="/progblog/static/assets/css/theme-6.css" href="javascript:void(0);"></a></li>
         <li class="theme-7  list-inline-item"><a data-style="/progblog/static/assets/css/theme-7.css" href="javascript:void(0);"></a></li>
         <li class="theme-8  list-inline-item"><a data-style="/progblog/static/assets/css/theme-8.css" href="javascript:void(0);"></a></li>
         <li class="theme-9  list-inline-item"><a data-style="/progblog/static/assets/css/theme-9.css" href="javascript:void(0);"></a></li>
         <li class="theme-10  list-inline-item"><a data-style="/progblog/static/assets/css/theme-10.css" href="javascript:void(0);"></a></li>
      </ul>
      <a id="config-close" class="close" href="javascript:void(0);"><i class="fa fa-times-circle"></i></a>
   </div>
</div>
      <script src="/progblog/static/assets/js/popper.min.js"></script> 
      <script src="/progblog/static/assets/js/bootstrap.min.js"></script>
      <script src="/progblog/static/assets/js/style-switcher.js"></script>
      <script src="/progblog/static/assets/js/dark-mode.js"></script>  
      <script src="/progblog/static/assets/js/highlight.min.js"></script>
      <script src="/progblog/static/assets/js/blog.js"></script>  
   </body>
</html>